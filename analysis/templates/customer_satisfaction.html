{% extends 'base.html' %}
{% load static %}

<!doctype html>
<html class="no-js" lang="en">


{% block title %}<title>Customer Satisfaction</title>{% endblock %}


{% block body %}    <!--[if lt IE 8]>

        <!-- sidebar menu area end -->
    <!-- main content area start -->
    <div class="main-content">
        <!-- header area start -->
        <div class="header-area">
            <div class="row align-items-center">
                <!-- nav and search button -->
                <div class="col-md-6 col-sm-8 clearfix">
                    <div class="nav-btn pull-left">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <div class="search-box pull-left">
                        <form action="#">
                            <input type="text" name="search" placeholder="Search..." required>
                            <i class="ti-search"></i>
                        </form>
                    </div>
                </div>
                <!-- profile info & task notification -->
                <div class="col-md-6 col-sm-4 clearfix">
                    <ul class="notification-area pull-right">
                        <li id="full-view"><i class="ti-fullscreen"></i></li>
                        <li id="full-view-exit"><i class="ti-zoom-out"></i></li>
                        <li class="dropdown">
                            <i class="ti-bell dropdown-toggle" data-toggle="dropdown">
                                <span>0</span>
                            </i>
                            <div class="dropdown-menu bell-notify-box notify-box">
                                <span class="notify-title">You have no notifications <a href="#">view all</a></span>
                                <div class="nofity-list">

                                </div>
                            </div>
                        </li>
                        <li class="dropdown">
                            <i class="fa fa-envelope-o dropdown-toggle" data-toggle="dropdown"><span>0</span></i>
                            <div class="dropdown-menu notify-box nt-enveloper-box">
                                <span class="notify-title">You have no new notifications <a href="#">view all</a></span>
                                <div class="nofity-list">

                                </div>
                            </div>
                        </li>
                        <li class="settings-btn">
                            <i class="ti-settings"></i>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- header area end -->
        <!-- page title area start -->
        <div class="page-title-area">
            <div class="row align-items-center">
                <div class="col-sm-6">
                    <div class="breadcrumbs-area clearfix">
                        <h4 class="page-title pull-left">Dashboard</h4>
                        <ul class="breadcrumbs pull-left">
                            <li><a href="{% url 'app:dashboard-home' %}">Home</a></li>
                            <li><span>Dashboard</span></li>
                        </ul>
                    </div>
                </div>
                <div class="col-sm-6 clearfix">
                    <div class="user-profile pull-right">
                        <img class="avatar user-thumb" src="{% static 'assets/images/author/avatar.png' %}"
                             alt="avatar">
                        <h4 class="user-name dropdown-toggle" data-toggle="dropdown">Dorukhan <i
                                class="fa fa-angle-down"></i></h4>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="#">Message</a>
                            <a class="dropdown-item" href="#">Settings</a>
                            <a class="dropdown-item" href="#">Log Out</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- page title area end -->
        <div class="main-content-inner">
            <div class="row" style="margin-bottom: 5%; padding: 2%;">

                <!-- Trend line start -->
                <div class="col-lg-8">
                    <div id="chartdiv"></div>
                </div>
                <!-- Trend line end -->

                <!-- Resources -->


                <div class="col-lg-4">
                    <h1>Airbnb Travelers Growth Trend by Year</h1>
                    <p>   </p>
                </div>

            </div>

            <div class="row" style="margin-top: 5%; margin-bottom: 5%; padding: 2%;">


                <div class="col-lg-4">
                    <h1>Number of reviews by room type</h1>
                    <p> </p>
                </div>

                <!-- Column bar chart -->
                <div class="col-lg-8">
                    <!-- HTML -->
                    <canvas id="bar-chart" width="800" height="450"></canvas>
                </div>

                <!-- Column bar chart end-->

            </div>


            {#            <div class="row">#}
            {##}
            {#                <!-- seo fact area start -->#}
            {#                <div class="col-lg-8">#}
            {#                    <div class="row">#}
            {#                        <div class="col-md-6 mt-5 mb-3">#}
            {#                            <div class="card">#}
            {#                                <div class="seo-fact sbg1">#}
            {#                                    <div class="p-4 d-flex justify-content-between align-items-center">#}
            {#                                        <div class="seofct-icon"><i class="ti-thumb-up"></i> Likes</div>#}
            {#                                        <h2>2,315</h2>#}
            {#                                    </div>#}
            {#                                    <canvas id="seolinechart1" height="50"></canvas>#}
            {#                                </div>#}
            {#                            </div>#}
            {#                        </div>#}
            {#                        <div class="col-md-6 mt-md-5 mb-3">#}
            {#                            <div class="card">#}
            {#                                <div class="seo-fact sbg2">#}
            {#                                    <div class="p-4 d-flex justify-content-between align-items-center">#}
            {#                                        <div class="seofct-icon"><i class="ti-share"></i> Share</div>#}
            {#                                        <h2>3,984</h2>#}
            {#                                    </div>#}
            {#                                    <canvas id="seolinechart2" height="50"></canvas>#}
            {#                                </div>#}
            {#                            </div>#}
            {#                        </div>#}
            {#                        <div class="col-md-6 mb-3 mb-lg-0">#}
            {#                            <div class="card">#}
            {#                                <div class="seo-fact sbg3">#}
            {#                                    <div class="p-4 d-flex justify-content-between align-items-center">#}
            {#                                        <div class="seofct-icon">Impressions</div>#}
            {#                                        <canvas id="seolinechart3" height="60"></canvas>#}
            {#                                    </div>#}
            {#                                </div>#}
            {#                            </div>#}
            {#                        </div>#}
            {#                        <div class="col-md-6">#}
            {#                            <div class="card">#}
            {#                                <div class="seo-fact sbg4">#}
            {#                                    <div class="p-4 d-flex justify-content-between align-items-center">#}
            {#                                        <div class="seofct-icon">New Users</div>#}
            {#                                        <canvas id="seolinechart4" height="60"></canvas>#}
            {#                                    </div>#}
            {#                                </div>#}
            {#                            </div>#}
            {#                        </div>#}
            {#                    </div>#}
            {#                </div>#}
            {#                <!-- seo fact area end -->#}
            {#                <!-- Social Campain area start -->#}
            {#                <div class="col-lg-4 mt-5">#}
            {#                    <div class="card">#}
            {#                        <div class="card-body pb-0">#}
            {#                            <h4 class="header-title">Social ads Campain</h4>#}
            {#                            <div id="socialads" style="height: 245px;"></div>#}
            {#                        </div>#}
            {#                    </div>#}
            {#                </div>#}
            {#                <!-- Social Campain area end -->#}
            {#                <!-- Statistics area start -->#}
            {#                <div class="col-lg-8 mt-5">#}
            {#                    <div class="card">#}
            {#                        <div class="card-body">#}
            {#                            <h4 class="header-title">User Statistics</h4>#}
            {#                            <div id="user-statistics"></div>#}
            {#                        </div>#}
            {#                    </div>#}
            {#                </div>#}
            {#                <!-- Statistics area end -->#}
            {#                <!-- Advertising area start -->#}
            {#                <div class="col-lg-4 mt-5">#}
            {#                    <div class="card h-full">#}
            {#                        <div class="card-body">#}
            {#                            <h4 class="header-title">Advertising & Marketing</h4>#}
            {#                            <canvas id="seolinechart8" height="233"></canvas>#}
            {#                        </div>#}
            {#                    </div>#}
            {#                </div>#}
            {#                <!-- Advertising area end -->#}
            {#                <!-- sales area start -->#}
            {#                <div class="col-xl-9 col-ml-8 col-lg-8 mt-5">#}
            {#                    <div class="card">#}
            {#                        <div class="card-body">#}
            {#                            <h4 class="header-title">Sales</h4>#}
            {#                            <div id="salesanalytic"></div>#}
            {#                        </div>#}
            {#                    </div>#}
            {#                </div>#}
            {#                <!-- sales area end -->#}
            {#                <!-- timeline area start -->#}
            {#                <div class="col-xl-3 col-ml-4 col-lg-4 mt-5">#}
            {#                    <div class="card">#}
            {#                        <div class="card-body">#}
            {#                            <h4 class="header-title">Timeline</h4>#}
            {#                            <div class="timeline-area">#}
            {#                                <div class="timeline-task">#}
            {#                                    <div class="icon bg1">#}
            {#                                        <i class="fa fa-envelope"></i>#}
            {#                                    </div>#}
            {#                                    <div class="tm-title">#}
            {#                                        <h4>Rashed sent you an email</h4>#}
            {#                                        <span class="time"><i class="ti-time"></i>09:35</span>#}
            {#                                    </div>#}
            {#                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Esse distinctio itaque#}
            {#                                        at.#}
            {#                                    </p>#}
            {#                                </div>#}
            {#                                <div class="timeline-task">#}
            {#                                    <div class="icon bg2">#}
            {#                                        <i class="fa fa-exclamation-triangle"></i>#}
            {#                                    </div>#}
            {#                                    <div class="tm-title">#}
            {#                                        <h4>Rashed sent you an email</h4>#}
            {#                                        <span class="time"><i class="ti-time"></i>09:35</span>#}
            {#                                    </div>#}
            {#                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Esse distinctio itaque#}
            {#                                        at.#}
            {#                                    </p>#}
            {#                                </div>#}
            {#                                <div class="timeline-task">#}
            {#                                    <div class="icon bg2">#}
            {#                                        <i class="fa fa-exclamation-triangle"></i>#}
            {#                                    </div>#}
            {#                                    <div class="tm-title">#}
            {#                                        <h4>Rashed sent you an email</h4>#}
            {#                                        <span class="time"><i class="ti-time"></i>09:35</span>#}
            {#                                    </div>#}
            {#                                </div>#}
            {#                                <div class="timeline-task">#}
            {#                                    <div class="icon bg3">#}
            {#                                        <i class="fa fa-bomb"></i>#}
            {#                                    </div>#}
            {#                                    <div class="tm-title">#}
            {#                                        <h4>Rashed sent you an email</h4>#}
            {#                                        <span class="time"><i class="ti-time"></i>09:35</span>#}
            {#                                    </div>#}
            {#                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Esse distinctio itaque#}
            {#                                        at.#}
            {#                                    </p>#}
            {#                                </div>#}
            {#                                <div class="timeline-task">#}
            {#                                    <div class="icon bg3">#}
            {#                                        <i class="ti-signal"></i>#}
            {#                                    </div>#}
            {#                                    <div class="tm-title">#}
            {#                                        <h4>Rashed sent you an email</h4>#}
            {#                                        <span class="time"><i class="ti-time"></i>09:35</span>#}
            {#                                    </div>#}
            {#                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Esse distinctio itaque#}
            {#                                        at.#}
            {#                                    </p>#}
            {#                                </div>#}
            {#                            </div>#}
            {#                        </div>#}
            {#                    </div>#}
            {#                </div>#}
            {#                <!-- timeline area end -->#}
            {#                <!-- map area start -->#}
            {#                <div class="col-xl-5 col-lg-12 mt-5">#}
            {#                    <div class="card">#}
            {#                        <div class="card-body">#}
            {#                            <h4 class="header-title">Marketing Area</h4>#}
            {#                            <div id="seomap"></div>#}
            {#                        </div>#}
            {#                    </div>#}
            {#                </div>#}
            {#                <!-- map area end -->#}
            {#                <!-- testimonial area start -->#}
            {#                <div class="col-xl-7 col-lg-12 mt-5">#}
            {#                    <div class="card">#}
            {#                        <div class="card-body bg1">#}
            {#                            <h4 class="header-title text-white">Client Feadback</h4>#}
            {#                            <div class="testimonial-carousel owl-carousel">#}
            {#                                <div class="tst-item">#}
            {#                                    <div class="tstu-img">#}
            {#                                        <img src="{% static 'assets/images/team/team-author1.jpg' %}"#}
            {#                                             alt="author image">#}
            {#                                    </div>#}
            {#                                    <div class="tstu-content">#}
            {#                                        <h4 class="tstu-name">Abel Franecki</h4>#}
            {#                                        <span class="profsn">Designer</span>#}
            {#                                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Vitae laborum ut#}
            {#                                            nihil numquam a aliquam alias necessitatibus ipsa soluta quam!</p>#}
            {#                                    </div>#}
            {#                                </div>#}
            {#                                <div class="tst-item">#}
            {#                                    <div class="tstu-img">#}
            {#                                        <img src="{% static 'assets/images/team/team-author2.jpg' %}"#}
            {#                                             alt="author image">#}
            {#                                    </div>#}
            {#                                    <div class="tstu-content">#}
            {#                                        <h4 class="tstu-name">Abel Franecki</h4>#}
            {#                                        <span class="profsn">Designer</span>#}
            {#                                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Vitae laborum ut#}
            {#                                            nihil numquam a aliquam alias necessitatibus ipsa soluta quam!</p>#}
            {#                                    </div>#}
            {#                                </div>#}
            {#                                <div class="tst-item">#}
            {#                                    <div class="tstu-img">#}
            {#                                        <img src="{% static 'assets/images/team/team-author3.jpg' %}"#}
            {#                                             alt="author image">#}
            {#                                    </div>#}
            {#                                    <div class="tstu-content">#}
            {#                                        <h4 class="tstu-name">Abel Franecki</h4>#}
            {#                                        <span class="profsn">Designer</span>#}
            {#                                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Vitae laborum ut#}
            {#                                            nihil numquam a aliquam alias necessitatibus ipsa soluta quam!</p>#}
            {#                                    </div>#}
            {#                                </div>#}
            {#                            </div>#}
            {#                        </div>#}
            {#                    </div>#}
            {#                </div>#}
            {#                <!-- testimonial area end -->#}
            {#            </div>#}
        </div>
    </div>
    <!-- main content area end -->
    <!-- footer area start-->
    <footer>
        <div class="footer-area">
            <p>Data Visualization Project</p>
        </div>
    </footer>
    <!-- footer area end-->
    </div>
    <!-- page container area end -->
    <!-- offset area start -->
    <div class="offset-area">
        <div class="offset-close"><i class="ti-close"></i></div>
        <ul class="nav offset-menu-tab">
            <li><a class="active" data-toggle="tab" href="#activity">Activity</a></li>
            <li><a data-toggle="tab" href="#settings">Settings</a></li>
        </ul>
        <div class="offset-content tab-content">
            <div id="activity" class="tab-pane fade in show active">
                <div class="recent-activity">

                </div>
            </div>
            <div id="settings" class="tab-pane fade">
                <div class="offset-settings">
                    <h4>General Settings</h4>
                    <div class="settings-list">
                        <div class="s-settings">
                            <div class="s-sw-title">
                                <h5>Notifications</h5>
                                <div class="s-swtich">
                                    <input type="checkbox" id="switch1"/>
                                    <label for="switch1">Toggle</label>
                                </div>
                            </div>
                            <p>Keep it 'On' When you want to get all the notification.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- bootstrap 4 js -->
    <script src="{% static 'assets/js/popper.min.js' %}"></script>
    <script src="{% static 'assets/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'assets/js/owl.carousel.min.js' %}"></script>
    <script src="{% static 'assets/js/metisMenu.min.js' %}"></script>
    <script src="{% static 'assets/js/jquery.slimscroll.min.js' %}"></script>
    <script src="{% static 'assets/js/jquery.slicknav.min.js' %}"></script>

    <!-- start chart js -->
    <script src="{% static 'assets/js/charts.min.js' %}"></script>
    <!-- start highcharts js -->
    <script src="{% static 'assets/js/highcharts.js' %}"></script>

    <script src="{% static 'assets/js/exporting.js' %}"></script>
    <script src="{% static 'assets/js/export-data.js' %}"></script>
    <!-- start amcharts -->
    <script src="{% static 'assets/js/amcharts.js' %}"></script>
    <script src="{% static 'assets/js/ammap.js' %}"></script>
    <script src="{% static 'assets/js/worldLow.js' %}"></script>
    <script src="{% static 'assets/js/serial.js' %}"></script>
    <script src="{% static 'assets/js/export.min.js' %}"></script>
    <script src="{% static 'assets/js/light.js' %}"></script>
    <!-- all line chart activation -->
    <script src="{% static 'assets/js/line-chart.js' %}"></script>
    <!-- all pie chart -->
    <script src="{% static 'assets/js/pie-chart.js' %}"></script>
    <!-- all bar chart -->
    <script src="{% static 'assets/js/bar-chart.js' %}"></script>
    <!-- all map chart -->

    <script src="{% static 'assets/js/maps.js' %}"></script>
    <!-- others plugins -->
    <script src="{% static 'assets/js/plugins.js' %}"></script>
    <script src="{% static 'assets/js/scripts.js' %}"></script>


    {% autoescape off %}
        <script type="text/javascript">


            /* ------------- map amchart 7 start ------------ */
            var map = AmCharts.makeChart("seomap", {
                "type": "map",
                "theme": "light",
                "projection": "miller",

                "imagesSettings": {
                    "rollOverColor": "#089282",
                    "rollOverScale": 3,
                    "selectedScale": 3,
                    "selectedColor": "#089282",
                    "color": "#13564e"
                },

                "areasSettings": {
                    "unlistedAreasColor": "#15A892"
                },

                "dataProvider": {
                    "map": "worldLow",
                    "images": [

                        {% for object in listofobjects %}


                            {
                                "zoomLevel": 5,
                                "scale": 0.5,
                                "title": "{{ object.neighbourhood }}",
                                "latitude": {{ object.latitude }},
                                "longitude": {{ object.longitude }}
                            },

                        {% endfor %}

                    ]
                }
            });

            // add events to recalculate map position when the map is moved or zoomed
            map.addListener("positionChanged", updateCustomMarkers);

            // this function will take current images on the map and create HTML elements for them
            function updateCustomMarkers(event) {
                // get map object
                var map = event.chart;

                // go through all of the images
                for (var x in map.dataProvider.images) {
                    // get MapImage object
                    var image = map.dataProvider.images[x];

                    // check if it has corresponding HTML element
                    if ('undefined' == typeof image.externalElement)
                        image.externalElement = createCustomMarker(image);

                    // reposition the element accoridng to coordinates
                    var xy = map.coordinatesToStageXY(image.longitude, image.latitude);
                    image.externalElement.style.top = xy.y + 'px';
                    image.externalElement.style.left = xy.x + 'px';
                }
            }

            // this function creates and returns a new marker element
            function createCustomMarker(image) {
                // create holder
                var holder = document.createElement('div');
                holder.className = 'map-marker';
                holder.title = image.title;
                holder.style.position = 'absolute';

                // maybe add a link to it?
                if (undefined != image.url) {
                    holder.onclick = function () {
                        window.location.href = image.url;
                    };
                    holder.className += ' map-clickable';
                }

                // create dot
                var dot = document.createElement('div');
                dot.className = 'dot';
                holder.appendChild(dot);

                // create pulse
                var pulse = document.createElement('div');
                pulse.className = 'pulse';
                holder.appendChild(pulse);

                // append the marker to the map container
                image.chart.chartDiv.appendChild(holder);


                return holder;
            }

            /* ------------- map amchart 7 END ------------ */

            chart.homeZoomLevel = 50;
            chart.homeGeoPoint = {
                latitude: 52,
                longitude: 11
            };

        </script>
    {% endautoescape %}



    <style>
        #chartdiv {
            width: 100%;
            height: 500px;
        }

        #columnbarchart {
            width: 100%;
            height: 500px;
        }

    </style>



    <script src="{% static 'assets_new/js/core.js' %}"></script>
    <script src="{% static 'assets/js/charts.js' %}"></script>
    <script src="{% static 'assets/js/animated.js' %}"></script>
    {% autoescape off %}
    <script>
        am4core.ready(function () {

// Themes begin
            am4core.useTheme(am4themes_animated);
// Themes end

// Create chart instance
            var chart = am4core.create("chartdiv", am4charts.XYChart);

// Enable chart cursor
            chart.cursor = new am4charts.XYCursor();
            chart.cursor.lineX.disabled = true;
            chart.cursor.lineY.disabled = true;

// Enable scrollbar
            chart.scrollbarX = new am4core.Scrollbar();

// Add data
            chart.data = [

                {% for i in trendline %}
                {
                "date": "{{ i.year }}",
                "value": {{ i.datecount }}
            },
                {% endfor %}
            ];

// Create axes
            var dateAxis = chart.xAxes.push(new am4charts.DateAxis());
            dateAxis.dataFields.category = "Date";
            dateAxis.renderer.grid.template.location = 0.5;
            dateAxis.dateFormatter.inputDateFormat = "yyyy-MM-dd";
            dateAxis.renderer.minGridDistance = 40;
            dateAxis.tooltipDateFormat = "MMM dd, yyyy";
            dateAxis.dateFormats.setKey("day", "dd");

            var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());

// Create series
            var series = chart.series.push(new am4charts.LineSeries());
            series.tooltipText = "{date}\n[bold font-size: 17px]value: {valueY}[/]";
            series.dataFields.valueY = "value";
            series.dataFields.dateX = "date";
            series.strokeDasharray = 3;
            series.strokeWidth = 2
            series.strokeOpacity = 0.3;
            series.strokeDasharray = "3,3"

            var bullet = series.bullets.push(new am4charts.CircleBullet());
            bullet.strokeWidth = 2;
            bullet.stroke = am4core.color("#fff");
            bullet.setStateOnChildren = true;
            bullet.propertyFields.fillOpacity = "opacity";
            bullet.propertyFields.strokeOpacity = "opacity";

            var hoverState = bullet.states.create("hover");
            hoverState.properties.scale = 1.7;

            function createTrendLine(data) {
                var trend = chart.series.push(new am4charts.LineSeries());
                trend.dataFields.valueY = "value";
                trend.dataFields.dateX = "date";
                trend.strokeWidth = 2
                trend.stroke = trend.fill = am4core.color("#c00");
                trend.data = data;

                var bullet = trend.bullets.push(new am4charts.CircleBullet());
                bullet.tooltipText = "{date}\n[bold font-size: 17px]value: {valueY}[/]";
                bullet.strokeWidth = 2;
                bullet.stroke = am4core.color("#fff")
                bullet.circle.fill = trend.stroke;

                var hoverState = bullet.states.create("hover");
                hoverState.properties.scale = 1.7;

                return trend;
            };

            createTrendLine([
                {% for row in trendline %}
                    {% if row.year == 2013 %}
                {"date": "{{ row.year }}", "value": {{row.datecount}} },
                    {% endif %}

                    {% if row.year == 2018  %}
                        {"date": "{{ row.year }}", "value": {{row.datecount}} },
                    {% endif %}
                {% endfor %}
            ]);



// Initial zoom once chart is ready
            lastTrend.events.once("datavalidated", function () {
                series.xAxis.zoomToDates(new Date(2012, 0, 2), new Date(2012, 0, 13));
            });

        }); // end am4core.ready()
    </script>
    {% endautoescape %}


    <script>
        new Chart(document.getElementById("bar-chart"), {
            type: 'bar',
            data: {
                labels:

                    [
                        {% for row in barchart %}
                        "{{ row.roomtype }}",
                        {% endfor %}

                    ],
                datasets: [
                    {
                        label: "Reviews",
                        backgroundColor: ["#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850"],
                        data: [
                            {% for row in barchart %}
                                {{ row.scorecount }},
                            {% endfor %}
                        ]
                    }
                ]
            },
            options: {
                legend: {display: false},
                title: {
                    display: true,
                    text: 'Number of Reviews by room type'
                }
            }
        });
    </script>

{% endblock %}
