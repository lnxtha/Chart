{% extends 'base.html' %}

{% load static %}

{% block title %}<title>Pricing Strategy</title>{% endblock %}

{% block body %}

<body>

        <!-- main content area start -->
        <div class="main-content">
            <!-- header area start -->
            <div class="header-area">
                <div class="row align-items-center">
                    <!-- nav and search button -->
                    <div class="col-md-6 col-sm-8 clearfix">
                        <div class="nav-btn pull-left">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <div class="search-box pull-left">
                            <form action="#">
                                <input type="text" name="search" placeholder="Search..." required>
                                <i class="ti-search"></i>
                            </form>
                        </div>
                    </div>
                    <!-- profile info & task notification -->
                    <div class="col-md-6 col-sm-4 clearfix">
                        <ul class="notification-area pull-right">
                            <li id="full-view"><i class="ti-fullscreen"></i></li>
                            <li id="full-view-exit"><i class="ti-zoom-out"></i></li>
                            <li class="dropdown">
                                <i class="ti-bell dropdown-toggle" data-toggle="dropdown">
                                    <span>0</span>
                                </i>
                                <div class="dropdown-menu bell-notify-box notify-box">
                                    <span class="notify-title">You have no notifications <a href="#">view all</a></span>
                                    <div class="nofity-list">
                                        
                                    </div>
                                </div>
                            </li>
                            <li class="dropdown">
                                <i class="fa fa-envelope-o dropdown-toggle" data-toggle="dropdown"><span>0</span></i>
                                <div class="dropdown-menu notify-box nt-enveloper-box">
                                    <span class="notify-title">You have no new notifications <a href="#">view all</a></span>
                                    <div class="nofity-list">
                                        
                                    </div>
                                </div>
                            </li>
                            <li class="settings-btn">
                                <i class="ti-settings"></i>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- header area end -->
            <!-- page title area start -->
            <div class="page-title-area">
                <div class="row align-items-center">
                    <div class="col-sm-6">
                        <div class="breadcrumbs-area clearfix">
                            <h4 class="page-title pull-left">Dashboard</h4>
                            <ul class="breadcrumbs pull-left">
                                <li><a href="index.html">Home</a></li>
                                <li><span>Dashboard</span></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-sm-6 clearfix">
                        <div class="user-profile pull-right">
                            <img class="avatar user-thumb" src="{% static 'assets/images/author/avatar.png' %}" alt="avatar">
                            <h4 class="user-name dropdown-toggle" data-toggle="dropdown">Dorukhan <i class="fa fa-angle-down"></i></h4>
                            <div class="dropdown-menu">
                                <a class="dropdown-item" href="#">Message</a>
                                <a class="dropdown-item" href="#">Settings</a>
                                <a class="dropdown-item" href="#">Log Out</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- page title area end -->
            <div class="main-content-inner">
                <!-- sales report area start -->
                <div class="sales-report-area sales-style-two">
                   <div class="row">
                    {% for row in averagepricebyroomtype %}
                    <div class="col-md-4">
                        <div class="single-report mb-xs-30">
                            <div class="s-report-inner pr--20 pt--30 mb-3">
                                <div class="icon">
<!--                                     <img src="{% static 'assets/images/icon/icon3.png' %}">-->
<!--                                    <i class="fa fa-btc"></i>-->
                                </div>
                                <div class="s-report-title d-flex justify-content-between">
                                    <h3 class="header-title mb-0">{{ row.room_type }}</h3>
                                </div>
                                <div class="d-flex justify-content-between pb-2">
                                    <h2>$ {{ row.average_price }}</h2>
{#                                    <span>- 45.87</span>#}
                                </div>
                            </div>
                            <canvas id="coin_sales{{ forloop.counter }}" height="100"></canvas>
                        </div>
                    </div>
                    {% endfor %}
                </div>

                <!-- visitor graph area end -->


                <!-- Relationship between number of booking and price- scattered plot !-->
                <div class="sales-report-area mt-5 mb-5">
                    <div class="row">
                        <canvas id="scatterplot" width="600" height="200"></canvas>
                    </div>
                </div>


                <div class="row">

                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <h4 class="header-title mb-0">Overview</h4>
                            </div>
                            <canvas id="linechart" width="600" height="200"></canvas>
                        </div>
                    </div>
                </div>

                </div>
            </div>
        </div>


    <!-- main content area end -->
        <!-- footer area start-->
        <footer>
            <div class="footer-area">
                <p>Data Visualization Project</p>
            </div>
        </footer>
        <!-- footer area end-->
    </div>
    <!-- page container area end -->
    <!-- offset area start -->
    <div class="offset-area">
        <div class="offset-close"><i class="ti-close"></i></div>
        <ul class="nav offset-menu-tab">
            <li><a class="active" data-toggle="tab" href="#activity">Activity</a></li>
            <li><a data-toggle="tab" href="#settings">Settings</a></li>
        </ul>
        <div class="offset-content tab-content">
            <div id="activity" class="tab-pane fade in show active">
                <div class="recent-activity">
                    
                </div>
            </div>
            <div id="settings" class="tab-pane fade">
                <div class="offset-settings">
                    <h4>General Settings</h4>
                    <div class="settings-list">
                        <div class="s-settings">
                            <div class="s-sw-title">
                                <h5>Notifications</h5>
                                <div class="s-swtich">
                                    <input type="checkbox" id="switch1" />
                                    <label for="switch1">Toggle</label>
                                </div>
                            </div>
                            <p>Keep it 'On' When you want to get all the notification.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- offset area end -->
    <!-- jquery latest version -->
     <!-- bootstrap 4 js -->
    <script src="{% static 'assets/js/popper.min.js' %}"></script>
    <script src="{% static 'assets/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'assets/js/owl.carousel.min.js' %}"></script>
    <script src="{% static 'assets/js/metisMenu.min.js' %}"></script>
    <script src="{% static 'assets/js/jquery.slimscroll.min.js' %}"></script>
    <script src="{% static 'assets/js/jquery.slicknav.min.js' %}"></script>

    <!-- start chart js -->
    <script src="{% static '/assets/js/charts.min.js' %}"></script>
    <!-- start highcharts js -->
    <script src="{% static '/assets/js/highcharts.js' %}"></script>
    <!-- start zingchart js -->
    <script src="{% static '/assets/js/zingchart.min.js' %}"></script>
    <script>
    zingchart.MODULESDIR = "https://cdn.zingchart.com/modules/";
    ZC.LICENSE = ["569d52cefae586f634c54f86dc99e6a9", "ee6b7db5b51705a13dc2339db3edaf6d"];
    </script>
    <!-- all line chart activation -->
    <script src="{% static 'assets/js/line-chart.js' %}"></script>
    <!-- all bar chart activation -->
    <script src="{% static 'assets/js/bar-chart.js' %}"></script>
    <!-- all pie chart -->
    <script src="{% static 'assets/js/pie-chart.js' %}"></script>
    <!-- others plugins -->
    <script src="{% static 'assets/js/plugins.js' %}"></script>
    <script src="{% static 'assets/js/scripts.js' %}"></script>

<script>


/*--------------  coin_sales1 start ------------*/
if ($('#coin_sales1').length) {
    var ctx = document.getElementById("coin_sales1").getContext('2d');
    var chart = new Chart(ctx, {
        // The type of chart we want to create
        type: 'line',
        // The data for our dataset
        data: {
            labels: [
                {% for row in averagepricebyroomtypeyearwise %}
                    {% if forloop.counter >= 1 and forloop.counter <= 10 %}
                    {{ row.year }},
                    {% endif %}
                {% endfor %}
            ],
            datasets: [{
                label: "Entire home/apt",
                backgroundColor: "rgba(117, 19, 246, 0.1)",
                borderColor: '#0b76b6',
                data: [
                    {% for row in averagepricebyroomtypeyearwise %}
                    {% if forloop.counter >= 1 and forloop.counter <= 10 %}
                    {{ row.average }},
                    {% endif %}
                {% endfor %}
                ],
            }]
        },
        // Configuration options go here
        options: {
            legend: {
                display: false
            },
            animation: {
                easing: "easeInOutBack"
            },
            scales: {
                yAxes: [{
                    display: !1,
                    ticks: {
                        fontColor: "rgba(0,0,0,0.5)",
                        fontStyle: "bold",
                        beginAtZero: !0,
                        maxTicksLimit: 5,
                        padding: 0
                    },
                    gridLines: {
                        drawTicks: !1,
                        display: !1
                    }
                }],
                xAxes: [{
                    display: !1,
                    gridLines: {
                        zeroLineColor: "transparent"
                    },
                    ticks: {
                        padding: 0,
                        fontColor: "rgba(0,0,0,0.5)",
                        fontStyle: "bold"
                    }
                }]
            }
        }
    });
}
/*--------------  coin_sales1 End ------------*/

/*--------------  coin_sales2 start ------------*/
if ($('#coin_sales2').length) {
    var ctx = document.getElementById("coin_sales2").getContext('2d');
    var chart = new Chart(ctx, {
        // The type of chart we want to create
        type: 'line',
        // The data for our dataset
        data: {
            labels: [
                {% for row in averagepricebyroomtypeyearwise %}
                    {% if forloop.counter >= 11 and forloop.counter <= 21 %}
                    {{ row.year }},
                    {% endif %}
                {% endfor %}
            ],
            datasets: [{
                label: "Private Room",
                backgroundColor: "rgba(117, 19, 246, 0.1)",
                borderColor: '#0b76b6',
                data: [
                    {% for row in averagepricebyroomtypeyearwise %}
                    {% if forloop.counter >= 11 and forloop.counter <= 21 %}
                    {{ row.average }},
                    {% endif %}
                    {% endfor %}
                ],
            }]
        },
        // Configuration options go here
        options: {
            legend: {
                display: false
            },
            animation: {
                easing: "easeInOutBack"
            },
            scales: {
                yAxes: [{
                    display: !1,
                    ticks: {
                        fontColor: "rgba(0,0,0,0.5)",
                        fontStyle: "bold",
                        beginAtZero: !0,
                        maxTicksLimit: 5,
                        padding: 0
                    },
                    gridLines: {
                        drawTicks: !1,
                        display: !1
                    }
                }],
                xAxes: [{
                    display: !1,
                    gridLines: {
                        zeroLineColor: "transparent"
                    },
                    ticks: {
                        padding: 0,
                        fontColor: "rgba(0,0,0,0.5)",
                        fontStyle: "bold"
                    }
                }]
            }
        }
    });
}
/*--------------  coin_sales2 End ------------*/

/*--------------  coin_sales3 start ------------*/
if ($('#coin_sales3').length) {
    var ctx = document.getElementById("coin_sales3").getContext('2d');
    var chart = new Chart(ctx, {
        // The type of chart we want to create
        type: 'line',
        // The data for our dataset
        data: {
            labels: [
                {% for row in averagepricebyroomtypeyearwise %}
                    {% if forloop.counter >= 22  %}
                    {{ row.year }},
                    {% endif %}
                {% endfor %}
            ],
            datasets: [{
                label: "Shared Room",
                backgroundColor: "rgba(117, 19, 246, 0.1)",
                borderColor: '#0b76b6',
                data: [
                    {% for row in averagepricebyroomtypeyearwise %}
                    {% if forloop.counter >= 22 %}
                    {{ row.average }},
                    {% endif %}
                {% endfor %}
                ],
            }]
        },
        // Configuration options go here
        options: {
            legend: {
                display: false
            },
            animation: {
                easing: "easeInOutBack"
            },
            scales: {
                yAxes: [{
                    display: !1,
                    ticks: {
                        fontColor: "rgba(0,0,0,0.5)",
                        fontStyle: "bold",
                        beginAtZero: !0,
                        maxTicksLimit: 5,
                        padding: 0
                    },
                    gridLines: {
                        drawTicks: !1,
                        display: !1
                    }
                }],
                xAxes: [{
                    display: !1,
                    gridLines: {
                        zeroLineColor: "transparent"
                    },
                    ticks: {
                        padding: 0,
                        fontColor: "rgba(0,0,0,0.5)",
                        fontStyle: "bold"
                    }
                }]
            }
        }
    });
}

/*--------------  coin_sales3 End ------------*/

</script>


    <!-- SCATTER PLOT START !-->
    {% autoescape off %}
    <script type="text/javascript">

    {#Scatter Plot#}

    var ctx = document.getElementById("scatterplot").getContext('2d');
    /*var description = document.getElementById("description");
    description.innerText = response.data.description;*/
    var myChart = new Chart(ctx, {
    type: 'scatter',
    data: {
    label: 'Scatter Dataset',
    datasets: [{
    data: [

    {% for row in scatterplot %}
    {
    x:{{ row.price }}, y:{{ row.listidcount }}
    },
    {% endfor %}
    ,

    ],
    label: 'Scattered Box Plot',
    backgroundColor: 'rgba(255, 0, 0, 1)',
    },
    ]
    },
    options: {
    title: {
    display: true,
    text: "Relationship between Number of Booking and Price"
    },
    legend: {
    display: true,
    },

    showLines: false,
    scales: {
    yAxes: [{
    display: true,
    scaleLabel: {
    display: true,
    labelString: 'Listing ID Count',
    fontSize: 16
    },
    ticks: {
    beginAtZero: true,
    fontSize: 14
    }
    }],
    xAxes: [{
    type: 'linear',
    position: 'bottom',
    display: true,
    scaleLabel: {
    display: true,
    labelString: 'Price',
    fontSize: 16
    },
    gridLines: {
    display: true
    },
    ticks: {
    beginAtZero: false,
    fontSize: 14,
    }
    }]
    },
    tooltips: {
    displayColors: false,
    callbacks: {
    title: function (tooltipItems, data) {
    var index = tooltipItems[0].index;
    var datasetIndex = tooltipItems[0].datasetIndex;
    var dataset = data.datasets[datasetIndex];
    var datasetItem = dataset.data[index];

    var person = response.data[datasetItem.id];
    return person.Name + " - " + person.Nationality;
    },
    label: function (tooltipItems, data) {
    var output = "";

    var index = tooltipItems.index;
    var datasetIndex = tooltipItems.datasetIndex;
    var dataset = data.datasets[datasetIndex];
    var datasetItem = dataset.data[index];

    var person = response.data[datasetItem.id];

    output += "TIme: " + person.Time + "\n | \n";
    output += "Place: " + person.Place + "\n | \n";
    output += "Year: " + person.Year + "\n | \n";
    if (person.Doping === "") {
    output += "Doping: None";
    } else {
    output += "Doping: " + person.Doping;
    }
    return output;
    }
    }
    }
    }
    })

    </script>
    {% endautoescape %}
    <!-- SCATTER PLOT END !-->

    <!-- LINE CHART START !-->
    {% autoescape off %}
    <script type="text/javascript">

    new Chart(document.getElementById("linechart"), {
    type: 'line',
    data: {
    labels: [

    {#1500,1600,1700,1750,1800,1850,1900,1950,1999,2050#}
    {% for row in linechart %}
    {% if forloop.counter >= 1 and forloop.counter <= 12 %}
    {{ row.month }},
    {% endif %}
    {% endfor %}

    ],
    datasets: [{
    //Entire home/apt
    data: [
    {#86,114,106,106,107,111,133,221,783,2478#}

    {% for row in linechart %}
    {% if forloop.counter >= 1 and forloop.counter <= 12 %}
    {{ row.avg_price }},
    {% endif %}
    {% endfor %}
    ],
    label: "2018",
    borderColor: "#3e95cd",
    fill: false
    }, {
    //Private Room
    data: [
    {#282,350,411,502,635,809,947,1402,3700,5267#}
    {% for row in linechart %}
    {% if forloop.counter > 12 %}
    {{ row.avg_price }},
    {% endif %}
    {% endfor %}

    ],
    label: "2019",
    borderColor: "#8e5ea2",
    fill: false
    }]
    },
    options: {
    title: {
    display: true,
    text: 'Average price as per year per month'
    }
    }
    });
    </script>
    {% endautoescape %}
    <!-- LINE CHART END !-->



    {% endblock %}











